!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);function a(e){if(0===e)return"#000";var t=Math.round(130*e-80),n=Math.round(20+50*e);return e>.99&&(n+=30),`hsl(${t},100%,${n}%)`}var r=1024,i=null;var s=4096,o=null;var u=[30,40,50,80,100,105,110,150,160],c=u.map(e=>0);function l(e,t,n){for(var a=0,r=t;r<n;r++)if(e[r]<0&&a++,e[r]>0&&a>5)return r;return-1}var h=1024,d=null;var v="",f=!1,m=document.querySelector("#play"),y=document.querySelector("#viz"),p=new AudioContext,_=p.createGain();_.connect(p.destination),window.ctx=p,window.master=_;var g=[1,.4,.9,.5],x=["sine","square","triangle","sawtooth"].map((e,t)=>{var n=p.createOscillator();n.type=e;var a=p.createGain();n.connect(a),a.connect(_);var r=!1,i=g[t];return function(e){r||n.start(),r=!0;var t=p.currentTime;n.frequency.setValueAtTime(e,t),a.gain.cancelScheduledValues(t),a.gain.setValueAtTime(0,t),a.gain.linearRampToValueAtTime(i,t+.05),a.gain.linearRampToValueAtTime(.8*i,t+.1),a.gain.setTargetAtTime(0,t+.5,.1)}});function b(){w||p.resume(),w=!0;var e=200+2e3*Math.random()*Math.random(),t=Math.floor(x.length*Math.random());x[t](e)}var w=!1;function M(e){q.mode=e?e-1:(q.mode+1)%3}m.addEventListener("click",b),window.addEventListener("keydown",e=>{" "===e.key&&(b(),e.preventDefault()),"p"===e.key&&("running"===p.state?p.suspend():p.resume())}),y.addEventListener("click",e=>M()),window.addEventListener("keydown",e=>{"1"===e.key&&M(1),"2"===e.key&&M(2),"3"===e.key&&M(3)});var q=new class{constructor(e,t,n,a,r){if(this.paused=!1,this.mode=r||0,this.minDb=-96,this.maxDb=-15,this.minFreq=150,this.maxFreq=15e3,this._ctx=e,this._canvasCtx=t.getContext("2d"),this._analyser=e.createAnalyser(),this._input=null,this._lastMode=-1,this.setInput(n),(a=a||30)>=60){var i=()=>{this.render(),requestAnimationFrame(i)};requestAnimationFrame(i)}else setInterval(()=>this.render(),1e3/a)}setInput(e){this._input&&this._input.disconnect(this._analyser),e.connect(this._analyser),this._input=e}render(){(function(e){var t=e._ctx.state;v||(v=t);if(t===v)return;v=t,"suspended"===t&&(f=!0);if("running"===t&&f)return e._input.disconnect(e._analyser),e._analyser=e._ctx.createAnalyser(),e._input.connect(e._analyser),f=!1,!0})(this)||this.paused||"running"===this._ctx.state&&(0===this.mode&&function(e){var t=e._analyser,n=e._canvasCtx;t.fftSize=r;var s=t.frequencyBinCount;i||(i=new Uint8Array(s));t.getByteFrequencyData(i);var o=i;e.clear();for(var u=n.canvas.width,c=n.canvas.height,l=Math.log2(e.maxFreq),h=Math.log2(e.minFreq),d=e._ctx.sampleRate/2,v=t.frequencyBinCount,f=0;f<u;f++){var m=f/(u-1),y=Math.pow(2,h+m*(l-h)),p=Math.round(y/d*v),_=o[p]/255,g=_*c;n.fillStyle=a(_),n.fillRect(f,c-g,1,g)}}(this),1===this.mode&&function(e){var t=e._analyser,n=e._canvasCtx;t.fftSize=s,t.minDecibels=e.minDb,t.maxDecibels=e.maxDb;var r=t.frequencyBinCount;o||(o=new Float32Array(r));t.getFloatTimeDomainData(o);var i=o;e.clear();var h=n.canvas.width,d=n.canvas.height,v=function(e){var t=[],n=0;for(;t.length<8&&n>=0;)(n=l(e,n,e.length/2))>0&&t.push(n);if(t.length<2)return t[0]||0;n=0;var a=999999.9;return t.forEach(t=>{var r=function(e,t){return u.reduce((n,a,r)=>{var i=t[e+a];return n+Math.abs(i-c[r])},0)}(t,e);r>a||(a=.95*r-1,n=t)}),c=u.map(t=>e[t+n]),n}(i);n.lineWidth=2,n.beginPath(),n.moveTo(0,d/2);for(var f=r/2,m=0,y=0;y<f;y++){var p=y+v,_=p<r?o[p]:0;_>m&&(m=_);var g=h*y/f,x=d*(.5*(_+1));n.lineTo(g,d-x)}n.strokeStyle=a(Math.max(.2,m)),n.stroke()}(this),2===this.mode&&function(e,t){var n=e._analyser,r=e._canvasCtx;n.fftSize=h,n.smoothingTimeConstant=.3,n.minDecibels=e.minDb,n.maxDecibels=e.maxDb;var i=n.frequencyBinCount;d||(d=new Uint8Array(i));n.getByteFrequencyData(d);var s=d,o=r.canvas.width,u=r.canvas.height;t?(r.fillStyle=a(0),r.fillRect(0,0,o,u)):r.drawImage(r.canvas,-1,0,o,u);for(var c=Math.log2(e.maxFreq),l=Math.log2(e.minFreq),v=e._ctx.sampleRate/2,f=n.frequencyBinCount,m=0;m<u;m++){var y=(u-1-m)/(u-1),p=Math.pow(2,l+y*(c-l)),_=Math.round(p/v*f),g=s[_]/255;r.fillStyle=a(g),r.fillRect(o-1,m,1,1)}}(this,this.mode!==this._lastMode),this._lastMode=this.mode)}clear(e){var t=this._canvasCtx.canvas.width,n=this._canvasCtx.canvas.height;this._canvasCtx.fillStyle=e||a(0),this._canvasCtx.fillRect(0,0,t,n)}}(p,y,_,30,0);q.paused=!1}]);